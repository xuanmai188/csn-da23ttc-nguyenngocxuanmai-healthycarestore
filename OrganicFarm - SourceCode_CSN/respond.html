<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Ph·∫£n h·ªìi li√™n h·ªá</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- All CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./fontawesome-free-6.3.0-web/css/all.min.css">
    <!-- CSS main-->
    <link rel="stylesheet" href="./css/main.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white bg-gradient shadow-sm fixed-top">
    <div class="container">
      <a class="navbar-brand" href="/">
        <img src="./img/web-logo.png" width="120px" alt="Web Logo Header">
      </a>
      
      <!-- N√∫t tr·ªü v·ªÅ Admin - ch·ªâ hi·ªÉn th·ªã khi admin ƒë√£ ƒëƒÉng nh·∫≠p -->
      <div id="adminReturnButton" class="d-none">
        <a href="admin.html" class="btn btn-outline-primary btn-sm me-3">
          <i class="fas fa-crown me-1"></i>Tr·ªü v·ªÅ Admin
        </a>
      </div>
      
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link text-success" href="index.html">Trang ch·ªß</a>
          </li>
          <li class="nav-item dropdown product-hover">
            <a class="nav-link text-success dropdown-toggle" href="products.html">
              S·∫£n ph·∫©m
            </a>

            <ul class="dropdown-menu simple-dropdown shadow">
              <li><a class="dropdown-item" href="products.html?category=Nutritious cereals">Ng≈© c·ªëc b·ªï
                  d∆∞·ª°ng</a></li>
              <li><a class="dropdown-item" href="products.html?category=Pulses">C√°c lo·∫°i ƒë·∫≠u</a></li>
              <li><a class="dropdown-item" href="products.html?category=Spices and Condiments">Gia v·ªã v√†
                  n∆∞·ªõc ch·∫•m</a>
              </li>
              <li><a class="dropdown-item" href="products.html?category=Cooking oils">Th·ª±c ph·∫©m ch·ª©c nƒÉng v√† m·ªπ ph·∫©m thi√™n nhi√™n</a>
              </li>
              <li><a class="dropdown-item" href="products.html?category=Rice">G·∫°o v√† c√°c s·∫£n ph·∫©m t·ª´
                  g·∫°o</a></li>
            </ul>
          </li>

          <li class="nav-item">
            <a class="nav-link text-success" href="contact-us.html">Li√™n h·ªá</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-success" href="about-us.html">Gi·ªõi Thi·ªáu</a>
          </li>

          <li class="nav-item dropdown" id="userArea">
            <a class="nav-link text-success dropdown-toggle" href="#" data-bs-toggle="dropdown">
              <i class="fa-solid fa-user"></i> ƒêƒÉng nh·∫≠p
            </a>
            <ul class="dropdown-menu dropdown-menu-end" id="userDropdown">
              <li><a class="dropdown-item" href="#">T√†i kho·∫£n c·ªßa t√¥i</a></li>
              <li><a class="dropdown-item" href="#">L·ªãch s·ª≠ mua h√†ng</a></li>
              <li><a class="dropdown-item" href="#">C√†i ƒë·∫∑t</a></li>
              <li><a class="dropdown-item" href="#" id="btnLogout">ƒêƒÉng xu·∫•t</a></li>
            </ul>
          </li>

          <li class="nav-item ms-3">
            <button class="btn btn-success position-relative" id="btnCart" data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasCart">
              Gi·ªè h√†ng <span id="cartCount" class="cart-count ms-1">0</span>
            </button>
          </li>


        </ul>
      </div>
    </div>
  </nav>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-7">
                <div class="card shadow border-0 p-4 mt-5">
                    <h2 class="text-success text-center mb-4">üéâ C·∫£m ∆°n b·∫°n ƒë√£ li√™n h·ªá!</h2>

                    <p class="text-muted text-center mb-4">
                        Ch√∫ng t√¥i ƒë√£ nh·∫≠n ƒë∆∞·ª£c th√¥ng tin li√™n h·ªá c·ªßa b·∫°n.<br>
                        ƒê·ªôi ng≈© Healthy Care s·∫Ω ph·∫£n h·ªìi trong th·ªùi gian s·ªõm nh·∫•t.
                    </p>

                    <h5 class="mb-3">üìå Th√¥ng tin b·∫°n ƒë√£ g·ª≠i</h5>

                    <ul class="list-group mb-4">
                        <li class="list-group-item"><strong>H·ªç t√™n:</strong> <span id="res-fullname"></span></li>
                        <li class="list-group-item"><strong>Email:</strong> <span id="res-email"></span></li>
                        <li class="list-group-item"><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <span id="res-phone"></span></li>
                        <li class="list-group-item"><strong>N·ªôi dung:</strong> <span id="res-message"></span></li>
                    </ul>

                    <p class="mb-4">
                        Ch√∫ng t√¥i tr√¢n tr·ªçng s·ª± tin t∆∞·ªüng c·ªßa b·∫°n. Nh√¢n vi√™n t∆∞ v·∫•n s·∫Ω li√™n h·ªá tr·ª±c ti·∫øp qua
                        s·ªë ƒëi·ªán tho·∫°i ho·∫∑c email m√† b·∫°n ƒë√£ cung c·∫•p.
                    </p>

                    <div class="text-center">
                        <a href="index.html" class="btn btn-success px-4">Quay v·ªÅ trang ch·ªß</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="farm-img">
      <img src="./img/footer-bg.png" class="img-fluid" width="718" height="239" alt="Footer background"
        data-src="./img/footer-bg.png">
    </div>
    <footer class="bg-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-sm-6">
                    <div class="single-box">
                        <img src="./img/web-logo.png" width="250px" alt="Web Logo Footer">
                        <ul class="nav flex-column" style="margin-left: -15px;">
                            <li class="nav-item">
                                <a class="nav-link text-success" href="#">
                                    <i class="fa-solid fa-location-dot"></i>&nbsp;
                                    Ph∆∞·ªùng 1, Tr√† Vinh, Vi·ªát Nam
                                </a>
                            </li>

                            <li class="nav-item"><a class="nav-link text-success" href="#"><i
                                        class="fa-solid fa-phone"></i>&nbsp;
                                    0382 020 858 - 0222 342 495 </a></li>
                            <li class="nav-item"><a class="nav-link text-success" href="#"> <i
                                        class="fa-sharp fa-regular fa-envelope"></i>&nbsp; support@aptech.vn</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="single-box">
                        <h2 class="fs-6 text-uppercase">H·ª¢P T√ÅC & PH√ÅT TRI·ªÇN</h2>
                        <ul class="nav flex-column" style="margin-left: -15px;">
                            <li class="nav-item"><a class="nav-link text-success" href="dai-ly.html">Tr·ªü th√†nh ƒë·∫°i l√Ω N√¥ng tr·∫°i H·ªØu c∆°</a></li>
                            <li class="nav-item"><a class="nav-link text-success" href="bang-gia.html">B·∫£ng gi√° b√°n l·∫ª</a></li>
                            <li class="nav-item"><a class="nav-link text-success" href="thu-vien-anh.html">Th∆∞ vi·ªán ·∫£nh</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="single-box">
                        <h2 class="fs-6 text-uppercase">Gi√° tr·ªã c·ªët l√µi</h2>
                        <ul class="nav flex-column" style="margin-left: -15px;">
                            <li><a class="nav-link text-success" href="gia-tri-dao-duc.html">Kinh doanh d·ª±a tr√™n gi√° tr·ªã ƒë·∫°o ƒë·ª©c</a></li>
                            <li><a class="nav-link text-success" href="khach-hang-trung-tam.html">ƒê·∫∑t kh√°ch h√†ng l√†m trung t√¢m</a></li>
                            <li><a class="nav-link text-success" href="chat-luong-an-toan.html">Ch·∫•t l∆∞·ª£ng v√† an to√†n</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="single-box">
                        <h2 class="fs-6 text-uppercase">Gi·ªõi thi·ªáu</h2>
                        <ul class="nav flex-column" style="margin-left: -15px;">
                            <li class="nav-item"><a class="nav-link text-success" href="about-us.html">V·ªÅ ch√∫ng t√¥i</a>
                            </li>
                            <li class="nav-item"><a class="nav-link text-success" href="tu-van.html">T∆∞ v·∫•n</a></li>
                            <li class="nav-item"><a class="nav-link text-success" href="dieu-khoan.html">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
                            <li class="nav-item"><a class="nav-link text-success" href="bao-mat.html">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                            <li class="nav-item"><a class="nav-link text-success" href="chinh-sach-khac.html">C√°c ch√≠nh s√°ch kh√°c</a></li>
                            <li class="nav-item">
                                <a class="nav-link text-success" href="#" onclick="showAdminLogin()">
                                    <i class="fas fa-cog"></i> Admin Panel
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <main class="container">
        <!-- Offcanvas Cart -->
        <div class="offcanvas offcanvas-end" id="offcanvasCart" style="width:420px">

            <div class="offcanvas-header">
                <h5 class="offcanvas-title">Gi·ªè h√†ng</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
            </div>
            <div class="offcanvas-body d-flex flex-column">
                <div id="cartItems" class="mb-3"><!-- JS render --></div>
                <div class="mt-auto">
                    <div class="d-flex justify-content-between mb-3">
                        <strong>T·ªïng:</strong>
                        <strong id="cartTotal">0‚Ç´</strong>
                    </div>
                    <button class="btn btn-success w-100 mb-2" id="btnCheckout" data-bs-dismiss="offcanvas">Ti·∫øn h√†nh
                        thanh to√°n</button>
                    <button class="btn btn-outline-secondary w-100" id="btnClearCart">X√≥a gi·ªè h√†ng</button>
                </div>
            </div>
        </div>

        <!-- Modal: Checkout -->
        <div class="modal fade" id="modalCheckout" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Thanh to√°n</h5>
                        <button class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form id="checkoutForm" class="form-checkout">
                            <div class="mb-3">
                                <label class="form-label">H·ªç t√™n</label>
                                <input type="text" id="custName" class="form-control" placeholder="Nh·∫≠p h·ªç t√™n c·ªßa b·∫°n"
                                    pattern=".{2,}" title="H·ªç t√™n ph·∫£i c√≥ √≠t nh·∫•t 2 k√Ω t·ª±" autocomplete="name" required>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                                <input type="tel" id="custPhone" class="form-control" placeholder="0123 456 789"
                                    pattern="0[0-9]{9}" title="S·ªë ƒëi·ªán tho·∫°i ph·∫£i g·ªìm 10 ch·ªØ s·ªë, b·∫Øt ƒë·∫ßu b·∫±ng s·ªë 0"
                                    autocomplete="tel" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">ƒê·ªãa ch·ªâ giao h√†ng</label>
                                <input type="text" id="custAddress" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Ph∆∞∆°ng th·ª©c thanh to√°n</label>
                                <select id="payMethod" class="form-select">
                                    <option value="cod">Thanh to√°n khi nh·∫≠n h√†ng (COD)</option>
                                    <option value="bank">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                                </select>
                            </div>
                            <div class="text-end">
                                <button class="btn btn-success">X√°c nh·∫≠n ƒë·∫∑t h√†ng</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal: Success -->
        <div class="modal fade" id="modalSuccess" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content text-center py-4">
                    <h5 class="mb-3">ƒê·∫∑t h√†ng th√†nh c√¥ng!</h5>
                    <p class="text-muted">M√£ ƒë∆°n h√†ng: <strong id="orderId">#HC0001</strong></p>
                    <button class="btn btn-primary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </main>
    <!-- All Js -->
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="./js/lst-products.js"></script>
    <script src="./js/detail.js"></script>
    <script src="./js/auth-cart.js"></script>

    <script>
    // Function to update category dropdown from localStorage
    function updateCategoryDropdown() {
        const categories = JSON.parse(localStorage.getItem('websiteCategories') || localStorage.getItem('categories')) || [];
        const dropdown = document.querySelector('.dropdown-menu');
        
        if (dropdown && categories.length > 0) {
            let newHTML = '';
            categories.forEach(category => {
                // Ch·ªâ hi·ªÉn th·ªã t√™n danh m·ª•c, kh√¥ng hi·ªÉn th·ªã s·ªë l∆∞·ª£ng
                newHTML += `<li><a class="dropdown-item" href="products.html?category=${category.value}">${category.name}</a></li>`;
            });
            dropdown.innerHTML = newHTML;
        }
    }
    
    // Listen for category updates from admin
    window.addEventListener('categoriesUpdated', function(event) {
        updateCategoryDropdown();
    });
    
    // Update categories on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateCategoryDropdown();
    });
    </script>

    <div class="modal fade" id="modalAuth" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="authTitle">ƒêƒÉng nh·∫≠p</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <form id="authForm">
                        <div class="mb-3" id="authNameWrapper" style="display:none">
                            <label class="form-label">H·ªç v√† t√™n</label>
                            <input type="text" id="authName" class="form-control">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                            <input type="text" id="authUsername" class="form-control" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">M·∫≠t kh·∫©u</label>
                            <input type="password" id="authPassword" class="form-control" required>
                        </div>

                        <div class="text-end">
                            <button class="btn btn-success">X√°c nh·∫≠n</button>
                        </div>
                    </form>

                    <hr>
                    <p class="text-center">
                        <a href="#" id="toggleAuth">Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalProfile" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Th√¥ng tin t√†i kho·∫£n</h5>
            <button class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form onsubmit="updateProfile(event)">
              <div class="mb-3">
                <label class="form-label">H·ªç t√™n</label>
                <input type="text" id="profileName" class="form-control" required>
              </div>

              <div class="mb-3">
                <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                <input type="text" id="profileUsername" class="form-control" required>
              </div>

              <div class="mb-3">
                <label class="form-label">M·∫≠t kh·∫©u</label>
                <input type="text" id="profilePassword" class="form-control" required>
              </div>

              <div class="text-end">
                <button class="btn btn-success">C·∫≠p nh·∫≠t</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>


    <div class="modal fade" id="modalHistory" tabindex="-1">
      <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">L·ªãch s·ª≠ mua h√†ng</h5>
            <button class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body" id="historyBody">
            <!-- JS render -->
          </div>
        </div>
      </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {

            document.getElementById("res-fullname").innerText =
                localStorage.getItem("contact_name") || "";

            document.getElementById("res-email").innerText =
                localStorage.getItem("contact_email") || "";

            document.getElementById("res-message").innerText =
                localStorage.getItem("contact_message") || "";

            // N·∫øu CH∆ØA c√≥ s·ªë ƒëi·ªán tho·∫°i th√¨ hi·ªÉn th·ªã "Kh√¥ng cung c·∫•p"
            const phone = localStorage.getItem("contact_phone");
            document.getElementById("res-phone").innerText =
                phone ? phone : "Kh√¥ng cung c·∫•p";

        });
    </script>

</body>

</html>