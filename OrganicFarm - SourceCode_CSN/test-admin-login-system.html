<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Login System</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./fontawesome-free-6.3.0-web/css/all.min.css">
</head>
<body>
    <div class="container mt-5">
        <h2><i class="fas fa-shield-alt me-2"></i>Test Admin Login System</h2>
        
        <div class="alert alert-info">
            <h5><i class="fas fa-info-circle me-2"></i>HÆ°á»›ng dáº«n test:</h5>
            <ol>
                <li><strong>Test Ä‘Äƒng nháº­p user tá»« header</strong> - Thá»­ Ä‘Äƒng nháº­p admin â†’ Bá»‹ cháº·n</li>
                <li><strong>Test Ä‘Äƒng nháº­p admin tá»« footer</strong> - Modal riÃªng, sáº¡ch sáº½</li>
                <li><strong>Kiá»ƒm tra báº£o máº­t</strong> - Admin chá»‰ Ä‘Äƒng nháº­p Ä‘Æ°á»£c tá»« footer</li>
                <li><strong>Test giao diá»‡n</strong> - Modal admin khÃ´ng cÃ³ gá»£i Ã½ tÃ i khoáº£n</li>
            </ol>
        </div>
        
        <!-- Simulate Header Login -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5><i class="fas fa-user me-2"></i>ÄÄƒng nháº­p tá»« Header</h5>
                    </div>
                    <div class="card-body">
                        <p>MÃ´ phá»ng Ä‘Äƒng nháº­p tá»« nÃºt header (dÃ nh cho user thÆ°á»ng)</p>
                        <button class="btn btn-primary" onclick="openAuthModal()">
                            <i class="fas fa-sign-in-alt me-2"></i>ÄÄƒng nháº­p User
                        </button>
                        <div class="mt-2">
                            <small class="text-muted">
                                âœ… User thÆ°á»ng: ÄÆ°á»£c phÃ©p<br>
                                âŒ Admin: Bá»‹ cháº·n
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h5><i class="fas fa-shield-alt me-2"></i>ÄÄƒng nháº­p Admin tá»« Footer</h5>
                    </div>
                    <div class="card-body">
                        <p>ÄÄƒng nháº­p admin tá»« link footer (modal riÃªng biá»‡t)</p>
                        <button class="btn btn-dark" onclick="showAdminLogin()">
                            <i class="fas fa-cog me-2"></i>Admin Panel
                        </button>
                        <div class="mt-2">
                            <small class="text-muted">
                                ğŸ” Modal riÃªng biá»‡t<br>
                                ğŸš« KhÃ´ng cÃ³ gá»£i Ã½ tÃ i khoáº£n
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test Cases -->
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-clipboard-check me-2"></i>Test Cases</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>ğŸ§ª Test 1: Header Login</h6>
                        <ul class="small">
                            <li>Nháº­p user thÆ°á»ng â†’ âœ… ThÃ nh cÃ´ng</li>
                            <li>Nháº­p admin/admin123 â†’ âŒ Bá»‹ cháº·n</li>
                            <li>Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i rÃµ rÃ ng</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6>ğŸ” Test 2: Admin Login</h6>
                        <ul class="small">
                            <li>Click "Admin Panel" â†’ Modal riÃªng</li>
                            <li>Giao diá»‡n sáº¡ch, khÃ´ng gá»£i Ã½</li>
                            <li>Nháº­p admin/admin123 â†’ âœ… VÃ o admin</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6>ğŸ›¡ï¸ Test 3: Security</h6>
                        <ul class="small">
                            <li>Admin khÃ´ng thá»ƒ tá»« header</li>
                            <li>User khÃ´ng thá»ƒ vÃ o admin panel</li>
                            <li>PhÃ¢n quyá»n rÃµ rÃ ng</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Current Status -->
        <div class="mt-4">
            <h4><i class="fas fa-info-circle me-2"></i>Tráº¡ng thÃ¡i hiá»‡n táº¡i</h4>
            <div id="currentStatus" class="alert alert-secondary">
                <div class="row">
                    <div class="col-md-6">
                        <strong>NgÆ°á»i dÃ¹ng hiá»‡n táº¡i:</strong>
                        <span id="currentUser">ChÆ°a Ä‘Äƒng nháº­p</span>
                    </div>
                    <div class="col-md-6">
                        <strong>Admin session:</strong>
                        <span id="adminSession">KhÃ´ng cÃ³</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Actions -->
        <div class="mt-4">
            <div class="card">
                <div class="card-header">
                    <h5><i class="fas fa-tools me-2"></i>Test Actions</h5>
                </div>
                <div class="card-body">
                    <button class="btn btn-outline-warning me-2" onclick="clearAllSessions()">
                        <i class="fas fa-sign-out-alt me-1"></i>ÄÄƒng xuáº¥t táº¥t cáº£
                    </button>
                    <button class="btn btn-outline-info me-2" onclick="updateStatus()">
                        <i class="fas fa-refresh me-1"></i>Cáº­p nháº­t tráº¡ng thÃ¡i
                    </button>
                    <button class="btn btn-outline-success" onclick="createTestUser()">
                        <i class="fas fa-user-plus me-1"></i>Táº¡o user test
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Copy modals from main files -->
    <div class="modal fade" id="modalAuth" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="authTitle">ÄÄƒng nháº­p</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="authForm">
                        <div class="mb-3" id="authNameWrapper" style="display:none">
                            <label class="form-label">Há» vÃ  tÃªn</label>
                            <input type="text" id="authName" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">TÃªn Ä‘Äƒng nháº­p</label>
                            <input type="text" id="authUsername" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Máº­t kháº©u</label>
                            <input type="password" id="authPassword" class="form-control" required>
                        </div>
                        <div class="text-end">
                            <button class="btn btn-success">XÃ¡c nháº­n</button>
                        </div>
                    </form>
                    <hr>
                    <div class="d-flex justify-content-between align-items-center">
                        <a href="#" id="toggleAuth">ChÆ°a cÃ³ tÃ i khoáº£n? ÄÄƒng kÃ½</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="./js/lst-products.js"></script>
    <script src="./js/auth-cart.js"></script>
    
    <script>
        // Test functions
        function updateStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const adminSession = JSON.parse(localStorage.getItem('adminUser'));
            
            document.getElementById('currentUser').textContent = 
                currentUser ? `${currentUser.name} (${currentUser.username})` : 'ChÆ°a Ä‘Äƒng nháº­p';
            
            document.getElementById('adminSession').textContent = 
                adminSession ? `${adminSession.username} - ${new Date(adminSession.loginTime).toLocaleString('vi-VN')}` : 'KhÃ´ng cÃ³';
        }

        function clearAllSessions() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('adminUser');
            updateStatus();
            alert('âœ… ÄÃ£ Ä‘Äƒng xuáº¥t táº¥t cáº£ session');
        }

        function createTestUser() {
            let users = JSON.parse(localStorage.getItem('users')) || [];
            
            const testUser = {
                name: 'Test User',
                username: 'testuser',
                password: 'test123',
                role: 'user'
            };
            
            if (!users.find(u => u.username === 'testuser')) {
                users.push(testUser);
                localStorage.setItem('users', JSON.stringify(users));
                alert('âœ… ÄÃ£ táº¡o user test:\nUsername: testuser\nPassword: test123');
            } else {
                alert('â„¹ï¸ User test Ä‘Ã£ tá»“n táº¡i:\nUsername: testuser\nPassword: test123');
            }
        }

        // Load status on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus();
            createTestUser(); // Auto create test user
            
            // Auto update status every 2 seconds
            setInterval(updateStatus, 2000);
        });
    </script>
</body>
</html>